<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TREES Framework - Interactive Demo</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            padding-top: 2rem;
        }
        .card {
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            border: none;
        }
        .card-header {
            background-color: #343a40;
            color: white;
            border-radius: 15px 15px 0 0 !important;
            padding: 15px;
        }
        .result-area {
            min-height: 100px;
            background-color: #f1f3f5;
            border-radius: 5px;
            padding: 15px;
            margin-top: 10px;
        }
        .nav-tabs .nav-link.active {
            font-weight: bold;
            background-color: #e9ecef;
        }
        .logo {
            max-height: 60px;
            margin-right: 15px;
        }
        .explanation {
            background-color: #e9ecef;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            font-size: 0.9rem;
        }
        .formula {
            font-family: 'Courier New', monospace;
            background-color: #343a40;
            color: #fff;
            padding: 2px 5px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="d-flex align-items-center mb-4">
            <h1 class="display-5 fw-bold">T.R.E.E.S. Framework <span class="text-muted fs-6">Interactive Demo</span></h1>
        </header>

        <div class="row">
            <div class="col-lg-8">
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">UML Calculator Playground</h5>
                    </div>
                    <div class="card-body">
                        <ul class="nav nav-tabs" id="calculatorTabs" role="tablist">
                            <li class="nav-item" role="presentation">
                                <button class="nav-link active" id="basic-tab" data-bs-toggle="tab" data-bs-target="#basic" type="button" role="tab" aria-controls="basic" aria-selected="true">Basic UML</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="ris-tab" data-bs-toggle="tab" data-bs-target="#ris" type="button" role="tab" aria-controls="ris" aria-selected="false">RIS Operators</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="symbolic-tab" data-bs-toggle="tab" data-bs-target="#symbolic" type="button" role="tab" aria-controls="symbolic" aria-selected="false">Symbolic</button>
                            </li>
                            <li class="nav-item" role="presentation">
                                <button class="nav-link" id="magic-tab" data-bs-toggle="tab" data-bs-target="#magic" type="button" role="tab" aria-controls="magic" aria-selected="false">Magic Squares</button>
                            </li>
                        </ul>
                        
                        <div class="tab-content pt-3" id="calculatorTabsContent">
                            <!-- Basic UML Tab -->
                            <div class="tab-pane fade show active" id="basic" role="tabpanel" aria-labelledby="basic-tab">
                                <div class="mb-3">
                                    <label for="basicExpression" class="form-label">Enter UML Expression:</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="basicExpression" placeholder="e.g., A5:B7+C3" value="A5:B7+C3">
                                        <button class="btn btn-primary" type="button" onclick="calculateBasic()">Calculate</button>
                                    </div>
                                    <div class="form-text">Try basic UML operations with letter-number notation</div>
                                </div>
                                <div class="result-area" id="basicResult">
                                    <p><strong>Result:</strong> <span id="basicResultValue">K5 (equivalent to 5 + 7 + 3 = 15)</span></p>
                                </div>
                                <div class="explanation">
                                    <h6>How Basic UML Works:</h6>
                                    <p>In UML notation, letters represent the type of number, and numbers represent the value:</p>
                                    <ul>
                                        <li><span class="formula">A5</span> - The letter A represents a single value, and 5 is that value</li>
                                        <li><span class="formula">A5:B7</span> - This colon represents an operation that combines two different types</li>
                                        <li><span class="formula">+C3</span> - Adding another number with type C and value 3</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- RIS Operators Tab -->
                            <div class="tab-pane fade" id="ris" role="tabpanel" aria-labelledby="ris-tab">
                                <div class="mb-3">
                                    <label for="risExpression" class="form-label">Enter RIS Meta-Operation:</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="risExpression" placeholder="e.g., RIS(A5:B7)" value="RIS(A5:B7)">
                                        <button class="btn btn-primary" type="button" onclick="calculateRis()">Calculate</button>
                                    </div>
                                    <div class="form-text">RIS applies recursive identity transformations</div>
                                </div>
                                <div class="result-area" id="risResult">
                                    <p><strong>Result:</strong> <span id="risResultValue">F12 (recursive identity expansion)</span></p>
                                </div>
                                <div class="explanation">
                                    <h6>Understanding RIS Operators:</h6>
                                    <p>RIS (Recursive Identity Systems) meta-operators transform expressions by applying recursive patterns:</p>
                                    <ul>
                                        <li>They identify self-referential patterns in mathematical structures</li>
                                        <li>Apply transformations based on the recursive properties</li>
                                        <li>Result in more concise representations of complex patterns</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- Symbolic Tab -->
                            <div class="tab-pane fade" id="symbolic" role="tabpanel" aria-labelledby="symbolic-tab">
                                <div class="mb-3">
                                    <label for="symbolicExpression" class="form-label">Enter Symbolic Expression:</label>
                                    <div class="input-group">
                                        <input type="text" class="form-control" id="symbolicExpression" placeholder="e.g., expand((x+y)^2)" value="expand((x+y)^2)">
                                        <button class="btn btn-primary" type="button" onclick="calculateSymbolic()">Calculate</button>
                                    </div>
                                    <div class="form-text">Perform symbolic algebra operations</div>
                                </div>
                                <div class="result-area" id="symbolicResult">
                                    <p><strong>Result:</strong> <span id="symbolicResultValue">x^2 + 2xy + y^2</span></p>
                                </div>
                                <div class="explanation">
                                    <h6>Symbolic Engine Capabilities:</h6>
                                    <p>The symbolic engine can handle:</p>
                                    <ul>
                                        <li>Algebraic manipulations (expand, factor, simplify)</li>
                                        <li>Calculus operations (differentiate, integrate)</li>
                                        <li>Equation solving</li>
                                        <li>Integration with UML notation for advanced operations</li>
                                    </ul>
                                </div>
                            </div>
                            
                            <!-- Magic Squares Tab -->
                            <div class="tab-pane fade" id="magic" role="tabpanel" aria-labelledby="magic-tab">
                                <div class="mb-3">
                                    <label for="magicSize" class="form-label">Magic Square Size:</label>
                                    <div class="input-group">
                                        <select class="form-control" id="magicSize">
                                            <option value="3">3x3</option>
                                            <option value="4">4x4</option>
                                            <option value="5">5x5</option>
                                        </select>
                                        <button class="btn btn-primary" type="button" onclick="generateMagic()">Generate</button>
                                    </div>
                                    <div class="form-text">Generate a magic square of the specified size</div>
                                </div>
                                <div class="result-area" id="magicResult">
                                    <p><strong>3x3 Magic Square:</strong></p>
                                    <pre id="magicSquareDisplay">
8 1 6
3 5 7
4 9 2
                                    </pre>
                                    <p>Magic constant: 15</p>
                                </div>
                                <div class="explanation">
                                    <h6>Magic Squares in TREES:</h6>
                                    <p>Magic squares have special properties that align with recursive systems:</p>
                                    <ul>
                                        <li>Each row, column, and diagonal sums to the same "magic constant"</li>
                                        <li>They exhibit mathematical patterns that can be analyzed with UML</li>
                                        <li>Magic squares connect to higher-dimensional structures in T.R.E.E.S.</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card mb-4">
                    <div class="card-header">
                        <h5 class="mb-0">About T.R.E.E.S.</h5>
                    </div>
                    <div class="card-body">
                        <p><strong>T</strong>ransformative <strong>R</strong>ecursive <strong>E</strong>mergent <strong>E</strong>mbedding <strong>S</strong>ystems is a mathematical framework for exploring recursive patterns in complex systems.</p>
                        <hr>
                        <h6>Key Components:</h6>
                        <ul>
                            <li><strong>UML Calculator</strong> - Process and evaluate UML expressions</li>
                            <li><strong>RIS Framework</strong> - Apply recursive identity operations</li>
                            <li><strong>Symbolic Engine</strong> - Perform symbolic algebraic manipulations</li>
                            <li><strong>Magic Square Analysis</strong> - Explore mathematical patterns</li>
                        </ul>
                        <a href="https://github.com/Nemeca99/TREES" target="_blank" class="btn btn-outline-primary w-100 mt-3">View on GitHub</a>
                    </div>
                </div>
                
                <div class="card">
                    <div class="card-header">
                        <h5 class="mb-0">Example Expressions</h5>
                    </div>
                    <div class="card-body">
                        <h6>Basic UML:</h6>
                        <ul>
                            <li><a href="#" onclick="setExample('basic', 'A5:B7+C3')">A5:B7+C3</a></li>
                            <li><a href="#" onclick="setExample('basic', 'D8*E4')">D8*E4</a></li>
                            <li><a href="#" onclick="setExample('basic', 'F9:G3:H7')">F9:G3:H7</a></li>
                        </ul>
                        
                        <h6>RIS Operations:</h6>
                        <ul>
                            <li><a href="#" onclick="setExample('ris', 'RIS(A5:B7)')">RIS(A5:B7)</a></li>
                            <li><a href="#" onclick="setExample('ris', 'RIS(C9*D4)')">RIS(C9*D4)</a></li>
                            <li><a href="#" onclick="setExample('ris', 'RIS(E2:F8:G1)')">RIS(E2:F8:G1)</a></li>
                        </ul>
                        
                        <h6>Symbolic:</h6>
                        <ul>
                            <li><a href="#" onclick="setExample('symbolic', 'expand((x+y)^2)')">expand((x+y)^2)</a></li>
                            <li><a href="#" onclick="setExample('symbolic', 'solve(x^2-4=0, x)')">solve(x^2-4=0, x)</a></li>
                            <li><a href="#" onclick="setExample('symbolic', 'diff(sin(x)*cos(x), x)')">diff(sin(x)*cos(x), x)</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
        
        <footer class="mt-5 text-center text-muted">
            <p>T.R.E.E.S. Framework Demo © 2025</p>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>    <script>
        // API call functions to interact with the backend
        async function calculateBasic() {
            const expression = document.getElementById('basicExpression').value;
            document.getElementById('basicResultValue').textContent = "Calculating...";
            
            try {
                const response = await fetch('/api/basic', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ expression: expression }),
                });
                
                const data = await response.json();
                if (data.success) {
                    document.getElementById('basicResultValue').textContent = data.result;
                } else {
                    document.getElementById('basicResultValue').textContent = "Error: " + data.result;
                }
            } catch (error) {
                document.getElementById('basicResultValue').textContent = "Error connecting to server: " + error.message;
            }
        }

        async function calculateRis() {
            const expression = document.getElementById('risExpression').value;
            document.getElementById('risResultValue').textContent = "Calculating...";
            
            try {
                const response = await fetch('/api/ris', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ expression: expression }),
                });
                
                const data = await response.json();
                if (data.success) {
                    document.getElementById('risResultValue').textContent = data.result;
                } else {
                    document.getElementById('risResultValue').textContent = "Error: " + data.result;
                }
            } catch (error) {
                document.getElementById('risResultValue').textContent = "Error connecting to server: " + error.message;
            }
        }

        async function calculateSymbolic() {
            const expression = document.getElementById('symbolicExpression').value;
            document.getElementById('symbolicResultValue').textContent = "Calculating...";
            
            try {
                const response = await fetch('/api/symbolic', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ expression: expression }),
                });
                
                const data = await response.json();
                if (data.success) {
                    document.getElementById('symbolicResultValue').textContent = data.result;
                } else {
                    document.getElementById('symbolicResultValue').textContent = "Error: " + data.result;
                }
            } catch (error) {
                document.getElementById('symbolicResultValue').textContent = "Error connecting to server: " + error.message;
            }
        }

        async function generateMagic() {
            const size = document.getElementById('magicSize').value;
            document.getElementById('magicSquareDisplay').textContent = "Generating...";
            
            try {
                const response = await fetch('/api/magic', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ size: parseInt(size) }),
                });
                
                const data = await response.json();
                if (data.success) {
                    // Format the magic square as a nice grid
                    let formattedSquare = '';
                    data.square.forEach(row => {
                        formattedSquare += row.map(num => String(num).padStart(2, ' ')).join(' ') + '\n';
                    });
                    
                    document.getElementById('magicSquareDisplay').textContent = formattedSquare;
                    
                    // Add the magic sum
                    const magicSumElement = document.createElement('p');
                    magicSumElement.textContent = `Magic constant: ${data.magic_sum}`;
                    
                    // Find and replace the old magic sum paragraph if it exists
                    const resultDiv = document.getElementById('magicResult');
                    const existingSum = resultDiv.querySelector('p:not(:first-child)');
                    if (existingSum) {
                        resultDiv.replaceChild(magicSumElement, existingSum);
                    } else {
                        resultDiv.appendChild(magicSumElement);
                    }
                } else {
                    document.getElementById('magicSquareDisplay').textContent = "Error: " + data.error;
                }
            } catch (error) {
                document.getElementById('magicSquareDisplay').textContent = "Error connecting to server: " + error.message;
            }
        }
        
        function setExample(tab, expression) {
            // Switch to the appropriate tab
            document.getElementById(tab + '-tab').click();
            
            // Set the expression in the input field
            document.getElementById(tab + 'Expression').value = expression;
            
            // Calculate the result
            if (tab === 'basic') calculateBasic();
            else if (tab === 'ris') calculateRis();
            else if (tab === 'symbolic') calculateSymbolic();
            
            return false;
        }
    </script>
</body>
</html>
